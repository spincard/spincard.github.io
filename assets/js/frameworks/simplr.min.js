// Simplr 3.0.0
(function(){function r(b,a,c){$(function(){var d="#SimplrNotify_"+a;b?(0==$("#SimplrNotify").size()&&$("body").prepend('<div id="SimplrNotify" style="position: fixed; z-index: 100000; top: 0; left: 0; width: 100%; box-shadow: 0 0 5px #000; text-transform: none; font-family: Arial; text-align: center; font-size: 16px; font-weight: normal; color: #000; background: #ccc none; line-height: 1.25; padding: 0; margin: 0; border: 0;">\x3c!-- --\x3e</div>'),0==$(d).size()&&(d='<p id="'+d.replace("#","")+'" style="margin: 10px 0; padding: 0;">'+
c+"</p>",$("div#SimplrNotify").append(d))):($(d).remove(),$("#SimplrNotify").is(":empty")&&$("#SimplrNotify").remove())})}window.Simplr={};(function(){function b(a,b){return a+"|"+((new Date).getTime()+b)}Simplr.Cache={mExpire:function(a){localStorage.removeItem(a);localStorage.removeItem(a+"_data");return localStorage.getItem(a+"_data")},mGet:function(a){a=$.extend({key:"",identifier:""},a);if(""!=a.key){var b=localStorage.getItem(a.key);if(null!=b&&(b=b.split("|"),2==b.length&&b[0]==a.identifier))return(new Date).getTime()<=
parseInt(b[1],10)?localStorage.getItem(a.key+"_data"):Simplr.Cache.mExpire(a.key)}return null},mSet:function(a){a=$.extend({key:"",identifier:"",data:"",freshness:6E5},a);return""!=a.key?(localStorage.setItem(a.key,b(a.identifier,a.freshness)),localStorage.setItem(a.key+"_data",a.data),Simplr.Cache.mGet({key:a.key,identifier:a.identifier})):null}}})();(function(){var b={CRUD:{view:!0,"new":!0,update:!0,"delete":!0},Commands:{},Bases:{}};Simplr.Controller={mAddBases:function(a){a=$.isArray(a)?a:[a];
for(var c=0,d=a.length;c<d;c++)b.Bases[a[c]]=1},mAddCommands:function(a){for(var c in a){var d=$.extend({route:[],callback:function(){}},a[c]),e=d.route.join("_");""!=e&&(b.Commands[e]=d.callback)}},mData:function(){return b},mExecute:function(a){var c=a.route.join("_");if($.isFunction(b.Commands[c]))b.Commands[c](a)},mRoute:function(a){a={route:[],url:a,base:"",resources:{},action:"",parameters:{}};"#"==a.url.charAt(0)&&(a.url=a.url.substring(1));"!"==a.url.charAt(0)&&(a.url=a.url.substring(1));
var c=a.url.split("?");c[0]=decodeURI(c[0]);var d=c[0],e;for(e in b.Bases)if((c[0]=c[0].replace(e,""))!=d){a.base=e;a.route.push(e);break}c[0]=c[0].split("/");a.action=c[0][c[0].length-1];a.action=b.CRUD[a.action]?a.action:"view";e=!0;for(var d="",f=0,g=c[0].length-1;f<g;f++)""!=c[0][f]&&(e?(d=c[0][f],a.route.push(d),a.resources[d]=""):a.resources[d]=c[0][f],e=!e);if(c[1])for(c=c[1].split("&"),e=0,d=c.length;e<d;e++)f=c[e].split("="),a.parameters[f[0]]=$.trim(decodeURIComponent(f[1]).replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"));a.route.push(a.action);return a},mRouteAndExecute:function(a){Simplr.Controller.mExecute(Simplr.Controller.mRoute(a))}};$(window).on("hashchange",{},function(){Simplr.Controller.mRouteAndExecute(window.location.hash)})})();Simplr.Cookie={mExpire:function(b){return Simplr.Cookie.mSet($.extend({name:"",expireDays:-1},b))},mGet:function(b){b=$.extend({name:""},b);return 0<document.cookie.length&&!Simplr.Util.mEmpty(b.name)&&(b=document.cookie.match("(^|;) ?"+
b.name+"=([^;]*)(;|$)"))?decodeURIComponent(b[2]):null},mSet:function(b){b=$.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},b);if(""!=b.name){var a=b.name+"="+encodeURIComponent(b.value);if(!Simplr.Util.mEmpty(b.expireDays)){var c=new Date;c.setTime(c.getTime()+864E5*b.expireDays);a+="; expires="+c.toUTCString()}a+=Simplr.Util.mEmpty(b.path)?"":"; path="+b.path;a+=Simplr.Util.mEmpty(b.domain)?"":"; domain="+b.domain;a+=b.secure?"; secure":"";document.cookie=a;return Simplr.Cookie.mGet({name:b.name})}return null}};
(function(){var b=!1;Simplr.Console={mToggle:function(a){b="undefined"!=typeof window.console&&"undefined"!=typeof window.console.group&&a;r(b,"Console","!-- Console Messaging is Active --!")},mMessage:function(a){if(b){a=$.extend({group:"",message:"",data:""},a);if($.isArray(a.message)){console.group(a.group);for(var c=0,d=a.message.length;c<d;c++)Simplr.Console.mMessage(a.message[c])}else console.group(a.message),console.log(a.data);console.groupEnd()}}}})();(function(){var b=["notempty"],a={},
c={};Simplr.Form={mAddLabelAssociation:function(a){$.extend(c,a)},mAddValidationAssociation:function(b){$.extend(a,b)},mGetValues:function(a){var b={};$("input, select, textarea",a).each(function(){var a=$(this);a.is("[type='button']")||a.is("[type='reset']")||a.is("[type='submit']")||a.is("[type='radio']")&&!a.is(":checked")||(a.is("[type='checkbox']")?b[$(this).attr("name")]=$(this).is(":checked")?"on"!=$(this).val()?$(this).val():!0:!1:(b[$(this).attr("name")]=$(this).val(),a.is("[type='password']")||
(b[$(this).attr("name")]=b[$(this).attr("name")].trim(),$(this).val(b[$(this).attr("name")]))))});return b},mValidateValuesAndRender:function(d,e){var f={},g;for(g in e){for(var k={value:e[g],label:c[g]?c[g]:"_LABEL_",rules:[]},h=0,m=b.length;h<m;h++)k.rules.push(b[h]);if($.isFunction(a[g]))a[g](k.rules);f[g]=k}f=Simplr.Validation.mValidate(f);$(".formError,.errorField",d).filter("._simplr").removeClass("formError").removeClass("errorField");$(".informationText,.errorText",d).filter("._simplr").remove();
for(var l in f.codes){g=f.codes[l];g=[g.error,g.success];k="";for(h=0;2>h;h++)0<g[h].length&&(k+='<p class="'+(0==h?"errorText":"informationText")+' _simplr">'+Simplr.Validation.mGetCodeMessage(g[h][0],f.data[l].label)+"</p>");$("[name='"+l+"']:first",d).addClass("errorField _simplr").closest(".formEntry").addClass("formError _simplr").append(k)}return f.valid}}})();(function(){var b={Components:{},GlobalTokens:{}};Simplr.Layout={mAddComponent:function(a,c){b.Components[a]=$.trim(c.replace(/\n/g,
"").replace(/\s{1,}/g," "));return!0},mGetComponent:function(a){if(void 0===b.Components[a]){var c=$("script#layout-"+a+"[type='text/x-simplr-layout-component']");1==c.size()&&Simplr.Layout.mAddComponent(a,c.text())}return b.Components[a]},mAddGlobalToken:function(a,c){b.GlobalTokens[a]=c},mAssembleLayout:function(a){var c="";if(a&&a.component&&a.tokens)for(var d=$.isArray(a.tokens)?a.tokens:[a.tokens],e=0,f=d.length;e<f;e++){var g={},k;for(k in d[e]){var h=g,m=k,l;l=d[e][k];l="object"==typeof l?
Simplr.Layout.mAssembleLayout(l):l;h[m]=l}h=Simplr.Layout.mGetComponent(a.component);if(void 0!==h)for(m in $.extend(g,b.GlobalTokens),m=void 0,g)h=h.replace(RegExp("\\$\\["+m+"\\]","g"),escape(g[m]));g=unescape(h);c+=g}return c},mData:function(){return b}}})();(function(){function b(b){var d={services:[],data:{envID:a.Env}};$.extend(!0,d,b.options);if(Simplr.Util.mEmpty(d.services)){var e=[],f;for(f in a.Services)e.push(f);d.services=e}e={group:"simplr.trigger: "+a.Env+" environment",message:[]};
f=0;for(var g=d.services.length;f<g;f++){var k=d.services[f];$.isFunction(a.Services[k][b.type])&&a.Services[k].data.environmentIDs[a.Env]&&e.message.push({message:"["+k+"] "+b.type+" triggered.",data:a.Services[k][b.type](d.data)})}0<e.message.length&&Simplr.Console.mMessage(e)}var a={Env:"_simplr",Services:{}};Simplr.Trigger={mAddServices:function(b){for(var d in b)a.Services[d]=$.extend({data:{environmentIDs:{}},onLoad:function(){},onPage:function(){},onEvent:function(){},onTransaction:function(){}},
b[d])},mData:function(){return a},mSetEnvironment:function(b){a.Env=b},mOnLoad:function(a){b({type:"onLoad",options:$.extend({},a)})},mOnPage:function(a){b({type:"onPage",options:$.extend({},a)})},mOnEvent:function(a){b({type:"onEvent",options:$.extend({},a)})},mOnTransaction:function(a){b({type:"onTransaction",options:$.extend({},a)})}}})();(function(){function b(a,c){if(typeof a==typeof c){if("object"!=typeof a)return a==c;if($.isArray(a)){if(a.length==c.length){for(var d=0,e=a.length;d<e;d++)if(!b(a[d],
c[d]))return!1;return!0}}else{for(d in a)if(!b(a[d],c[d]))return!1;var f=e=0;for(d in a)e++;for(d in c)f++;return e==f}}return!1}Simplr.Util={mEmpty:function(a){var b=typeof a;return"undefined"!=b&&null!=a?"object"==b?$.isArray(a)?0==a.length:$.isEmptyObject(a):""==$.trim(a):!0},mEqual:function(a){if($.isArray(a)){for(var c=!0,d=0,e=a.length;d<e;d++)b(a[0],a[d])||(c=!1,d=e);return c}return!0},mGetUrlParameter:function(a){var b=location.search;if(""!=b){for(var b=b.substring(1).split("&"),d={},e=0,
f=b.length;e<f;e++){var g=b[e].split("=");d[g[0]]=$.trim(decodeURIComponent(g[1]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))}if(Simplr.Util.mEmpty(a))return d;if("undefined"!=typeof d[a])return d[a]}return null},mTruncateString:function(a){a=$.extend({string:"",size:5,postfix:"",smart:!0},a);if(a.string.length>a.size){var b=a.size-a.postfix.length-1,d=b+1;if(a.smart)for(;" "!=a.string.charAt(b)&&0<b;)b--;return a.string.substring(0,0==b?d:b+1)+a.postfix}return a.string}}})();
(function(){function b(a,b){var c=b,d;for(d in a)c=c.replace(RegExp("\\$\\["+d+"\\]","g"),escape(a[d]));return unescape(c)}var a={eEmpty:"$[label] is empty.",eMissingValidator:"Missing Validator"},c={success:[],error:[]},d={valid:!0,successCodes:[],errorCodes:[]},e={missingvalidator:function(a){return $.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},notempty:function(a){var b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());"undefined"!=
typeof a&&null!=a&&("string"==typeof a?b.valid=""!=$.trim(a):$.isArray(a)?b.valid=0!=a.length:"object"==typeof a&&(b.valid=!$.isEmptyObject(a)));b.valid||b.errorCodes.push("eEmpty");return b}},f={data:"",valid:!0,codes:{}};Simplr.Validation={mAddCodes:function(b){$.extend(a,b)},mGetCodes:function(){return a},mAddValidators:function(a){$.extend(e,a)},mGetValidators:function(){return e},mGetRuleResultsTemplate:function(){return $.extend(!0,{},d)},mGetCodeMessage:function(c,d){return void 0!=a[c]?b({label:d},
a[c]):b({label:c},"$[label] is UNDEFINED")},mValidate:function(a){a=$.extend(!0,{},f,{data:$.extend(!0,{},a)});for(var b in a.data){var h=a.data[b];a.codes[b]=$.extend(!0,{},c);for(var m=0,l=h.rules.length;m<l;m++){var n=h.rules[m],q=$.extend(!0,{},d),q=e[n]?e[n](h.value):e.missingvalidator(h.value),n=b,p=a;p.codes[n].success=p.codes[n].success.concat(q.successCodes);p.codes[n].error=p.codes[n].error.concat(q.errorCodes);q.valid||(p.valid=!1)}0==a.codes[b].error.length&&0==a.codes[b].success.length&&
delete a.codes[b]}return a}}})();Simplr.Validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",
ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});Simplr.Validation.mAddValidators({missingvalidator:function(b){return $.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(b)});b.valid||b.errorCodes.push("eAlphaNumeric");return b},americanexpress:function(b){b=
$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(b)});b.valid||b.errorCodes.push("eAmericanExpress");return b},dinersclub:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(b)});b.valid||b.errorCodes.push("eDinersClub");return b},discover:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(b)});b.valid||b.errorCodes.push("eDiscover");
return b},email:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(b)});b.valid||b.errorCodes.push("eEmail");return b},equal:function(b){var a=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());if($.isArray(b))for(var c=0,d=b.length;c<d;c++)Simplr.Util.mEqual([b[0],b[c]])||(a.valid=!1,c=d);a.valid||a.errorCodes.push("eEqual");return a},mastercard:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),
{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(b)});b.valid||b.errorCodes.push("eMastercard");return b},notempty:function(b){var a=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());"undefined"!=typeof b&&null!=b&&("string"==typeof b?a.valid=""!=$.trim(b):$.isArray(b)?a.valid=0!=b.length:"object"==typeof b&&(a.valid=!$.isEmptyObject(b)));a.valid||a.errorCodes.push("eEmpty");return a},number:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(b))&&
isFinite(b)});b.valid||b.errorCodes.push("eNumber");return b},phonenumber:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(b)});b.valid||b.errorCodes.push("ePhoneNumber");return b},postalcode:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(b)});b.valid||b.errorCodes.push("ePostalCode");return b},visa:function(b){b=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(b)});
b.valid||b.errorCodes.push("eVisa");return b}});(function(){var b={Views:{}};Simplr.View={mAddViews:function(a){for(var c in a){var d=$.extend(!0,{},{html:function(a){return""},callback:function(a,b){}},a[c]);b.Views[c]=d}},mData:function(){return b},mRender:function(a){a=$.extend({name:"",data:"",selector:""},a);$(a.selector).html(b.Views[a.name].html(a.data));b.Views[a.name].callback(a.selector,a.data)}}})()})();
